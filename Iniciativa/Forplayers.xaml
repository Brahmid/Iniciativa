<Window x:Class="Iniciativa.Forplayers"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Iniciativa"
        mc:Ignorable="d"               
        Title="Forplayers" Height="360" Width="900" ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Hidden">
    <Window.Resources>
        <local:VisibilityConverter x:Key="VisibilityConverter"/>
        <local:NameWithAvatarNameConverter x:Key="NameWithIndexConverter"/>
    </Window.Resources>

    <!-- WindowStyle="None"  -->
    <!-- AllowsTransparency="True" -->
    <!-- Background-="Transparent" -->
    <Grid ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Hidden">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        
            <Grid>
                <!-- Obrázek -->
                <Image x:Name="FirstImage" Source="{Binding AvatarPath}" Stretch="UniformToFill" />

                <!-- Překrytí názvem -->
                <TextBlock x:Name="FirstName" Text="{Binding Name}" 
                   Background="Black" 
                   Foreground="White"
                   FontWeight="Bold"
                   Opacity="0.8"
                   HorizontalAlignment="Center" 
                   VerticalAlignment="Bottom" 
                   Padding="5" />
            </Grid>
        <ListBox x:Name="List" ItemsSource="{Binding Items}" BorderThickness="0" AlternationCount="100" ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Grid.Column="1">           
                <ListBox.ItemTemplate>               
                <DataTemplate>
                    <Grid Width="150"  Height="150" >
                        <Grid.Visibility>
                            <MultiBinding Converter="{StaticResource VisibilityConverter}">
                                <Binding Path="Hide"/>
                                <Binding RelativeSource="{RelativeSource AncestorType=ListBoxItem}" Path="(ItemsControl.AlternationIndex)"/>                                
                            </MultiBinding>
                        </Grid.Visibility>
                        
                        <!-- Obrázek -->
                        <Image  x:Name="Image" Source="{Binding AvatarPath}" Stretch="UniformToFill" />

                        <!-- Překrytí názvem -->
                        <TextBlock Background="Black" 
                                   Foreground="White"
                                   FontWeight="Bold"
                                   Opacity="0.8"
                                   HorizontalAlignment="Center" 
                                   VerticalAlignment="Bottom" 
                                   Padding="5">
                            <TextBlock.Text>
                                <MultiBinding Converter="{StaticResource NameWithIndexConverter}">
                                    <Binding Path="Name"/>
                                    <Binding Path="AvatarName"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </Grid>                    
                </DataTemplate>
            </ListBox.ItemTemplate>

            <!-- Nastavení stylu ListBoxu -->
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox>
    </Grid>
</Window>
